{
  "name": "vscode-unify-chat-provider",
  "displayName": "Unify Chat Provider",
  "description": "Integrate multiple LLM API providers into VS Code's Github Copilot Chat using the Language Model API.",
  "version": "1.0.0",
  "categories": [
    "AI",
    "Chat"
  ],
  "keywords": [
    "ai",
    "chat",
    "copilot",
    "github-copilot",
    "language-model",
    "llm",
    "openai",
    "anthropic",
    "ollama",
    "gemini",
    "deepseek",
    "custom-models",
    "自定义模型"
  ],
  "publisher": "SmallMain",
  "icon": "icon.png",
  "repository": "github:smallmain/vscode-unify-chat-provider",
  "bugs": "https://github.com/smallmain/vscode-unify-chat-provider/issues",
  "author": "SmallMain",
  "license": "MIT",
  "engines": {
    "vscode": "^1.104.0"
  },
  "packageManager": "npm@10.8.2",
  "extensionDependencies": [
    "GitHub.copilot-chat"
  ],
  "enabledApiProposals": [
    "extensionsAny",
    "newSymbolNamesProvider",
    "interactive",
    "codeActionAI",
    "activeComment",
    "commentReveal",
    "contribCommentThreadAdditionalMenu",
    "contribCommentsViewThreadMenus",
    "documentFiltersExclusive",
    "embeddings",
    "findTextInFiles",
    "findTextInFiles2",
    "findFiles2",
    "textSearchProvider",
    "terminalDataWriteEvent",
    "terminalExecuteCommandEvent",
    "terminalSelection",
    "terminalQuickFixProvider",
    "mappedEditsProvider",
    "aiRelatedInformation",
    "aiSettingsSearch",
    "chatParticipantAdditions",
    "chatEditing",
    "defaultChatParticipant",
    "contribSourceControlInputBoxMenu",
    "authLearnMore",
    "testObserver",
    "aiTextSearchProvider",
    "chatParticipantPrivate",
    "chatProvider",
    "contribDebugCreateConfiguration",
    "chatReferenceDiagnostic",
    "textSearchProvider2",
    "chatReferenceBinaryData",
    "languageModelSystem",
    "languageModelCapabilities",
    "inlineCompletionsAdditions",
    "chatStatusItem",
    "taskProblemMatcherStatus",
    "contribLanguageModelToolSets",
    "textDocumentChangeReason",
    "resolvers",
    "taskExecutionTerminal",
    "dataChannels",
    "languageModelThinkingPart",
    "chatSessionsProvider",
    "devDeviceId",
    "contribEditorContentMenu"
  ],
  "activationEvents": [
    "onStartupFinished"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "languageModelChatProviders": [
      {
        "vendor": "unify-chat-provider",
        "displayName": "Unify Chat Provider",
        "managementCommand": "unifyChatProvider.manageProviders"
      }
    ],
    "commands": [
      {
        "command": "unifyChatProvider.addProvider",
        "title": "Unify Chat Provider: Add Provider"
      },
      {
        "command": "unifyChatProvider.addProviderFromConfig",
        "title": "Unify Chat Provider: Add Provider From Config"
      },
      {
        "command": "unifyChatProvider.addProviderFromWellKnownList",
        "title": "Unify Chat Provider: Add Provider From Well-Known Provider List"
      },
      {
        "command": "unifyChatProvider.importProviders",
        "title": "Unify Chat Provider: Import Config From Other Applications"
      },
      {
        "command": "unifyChatProvider.removeProvider",
        "title": "Unify Chat Provider: Remove Provider"
      },
      {
        "command": "unifyChatProvider.manageProviders",
        "title": "Unify Chat Provider: Manage Providers"
      },
      {
        "command": "unifyChatProvider.refreshOfficialModels",
        "title": "Unify Chat Provider: Refresh All Provider's Official Models"
      }
    ],
    "configuration": {
      "title": "Unify Chat Provider",
      "properties": {
        "unifyChatProvider.verbose": {
          "type": "boolean",
          "description": "Enable verbose logging of requests and responses.",
          "default": false
        },
        "unifyChatProvider.storeApiKeyInSettings": {
          "type": "boolean",
          "description": "Store API keys in settings.json instead of VS Code Secret Storage.\n\nDANGER: Changing this setting will migrate existing API keys between storage locations (may expose secrets in plain text).",
          "default": false
        },
        "unifyChatProvider.endpoints": {
          "type": "array",
          "description": "List of LLM API provider endpoints.",
          "items": {
            "type": "object",
            "required": [
              "type",
              "name",
              "baseUrl",
              "models"
            ],
            "properties": {
              "type": {
                "type": "string",
                "description": "API format type. Determines how requests are formatted.",
                "enum": [
                  "anthropic",
                  "openai-chat-completion",
                  "openai-responses",
                  "ollama"
                ],
                "enumDescriptions": [
                  "Anthropic Messages API",
                  "OpenAI Chat Completion API",
                  "OpenAI Responses API",
                  "Ollama Chat API"
                ]
              },
              "name": {
                "type": "string",
                "description": "Display name for this provider."
              },
              "baseUrl": {
                "type": "string",
                "description": "API base URL (e.g., https://api.anthropic.com)."
              },
              "apiKey": {
                "type": "string",
                "description": "API key for authentication."
              },
              "mimic": {
                "type": "string",
                "description": "Mimic some User-Agent client behavior (leave empty for default).",
                "enum": [
                  "claude-code"
                ]
              },
              "extraHeaders": {
                "type": "object",
                "description": "Extra headers to include in requests. Header values support `${APIKEY}` to reference the provider apiKey.",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "extraBody": {
                "type": "object",
                "description": "Extra body parameters to include in requests.",
                "additionalProperties": true
              },
              "timeout": {
                "type": "object",
                "description": "Timeout configuration for HTTP requests and SSE streams.",
                "properties": {
                  "connection": {
                    "type": "integer",
                    "description": "TCP connection timeout in milliseconds.",
                    "default": 10000
                  },
                  "response": {
                    "type": "integer",
                    "description": "Maximum time between SSE data chunks in milliseconds.",
                    "default": 120000
                  }
                }
              },
              "autoFetchOfficialModels": {
                "type": "boolean",
                "description": "Automatically fetch and sync official models from the provider API.",
                "default": false
              },
              "models": {
                "type": "array",
                "description": "List of available models.",
                "items": {
                  "oneOf": [
                    {
                      "type": "string",
                      "description": "Model ID"
                    },
                    {
                      "type": "object",
                      "required": [
                        "id"
                      ],
                      "properties": {
                        "id": {
                          "type": "string",
                          "description": "Model ID (e.g., claude-sonnet-4-20250514)."
                        },
                        "name": {
                          "type": "string",
                          "description": "Display name for the model."
                        },
                        "family": {
                          "type": "string",
                          "description": "Model family (e.g., gpt-4, claude-3). Defaults to model ID."
                        },
                        "maxInputTokens": {
                          "type": "number",
                          "description": "Maximum input/context tokens.",
                          "default": 128000
                        },
                        "maxOutputTokens": {
                          "type": "number",
                          "description": "Maximum output tokens.",
                          "default": 8192
                        },
                        "capabilities": {
                          "type": "object",
                          "description": "Model capabilities.",
                          "properties": {
                            "toolCalling": {
                              "anyOf": [
                                {
                                  "type": "boolean",
                                  "description": "Whether the model supports tool/function calling."
                                },
                                {
                                  "type": "integer",
                                  "description": "Maximum number of tools supported."
                                }
                              ]
                            },
                            "imageInput": {
                              "type": "boolean",
                              "description": "Whether the model supports image input."
                            }
                          }
                        },
                        "parallelToolCalling": {
                          "type": "boolean",
                          "description": "Enable or disable parallel tool calling (unset for provider default)."
                        },
                        "stream": {
                          "type": "boolean",
                          "description": "Whether to stream the response."
                        },
                        "temperature": {
                          "type": "number",
                          "description": "Sampling temperature."
                        },
                        "topK": {
                          "type": "integer",
                          "description": "Top-k sampling."
                        },
                        "topP": {
                          "type": "number",
                          "description": "Top-p sampling."
                        },
                        "presencePenalty": {
                          "type": "number",
                          "description": "Presence penalty."
                        },
                        "frequencyPenalty": {
                          "type": "number",
                          "description": "Frequency penalty."
                        },
                        "verbosity": {
                          "type": "string",
                          "description": "Constrains response verbosity (low=concise, high=verbose).",
                          "enum": [
                            "low",
                            "medium",
                            "high"
                          ],
                          "enumDescriptions": [
                            "More concise responses.",
                            "Balanced verbosity.",
                            "More verbose responses."
                          ]
                        },
                        "thinking": {
                          "type": "object",
                          "description": "Thinking configuration.",
                          "oneOf": [
                            {
                              "properties": {
                                "type": {
                                  "const": "enabled",
                                  "description": "Enable thinking."
                                },
                                "budgetTokens": {
                                  "type": "integer",
                                  "description": "Token budget for thinking."
                                },
                                "effort": {
                                  "type": "string",
                                  "description": "Thinking effort level (leave blank to let the provider decide).",
                                  "enum": [
                                    "none",
                                    "minimal",
                                    "low",
                                    "medium",
                                    "high",
                                    "xhigh"
                                  ],
                                  "enumDescriptions": [
                                    "No thinking effort.",
                                    "Minimal thinking effort.",
                                    "Low thinking effort.",
                                    "Medium thinking effort.",
                                    "High thinking effort.",
                                    "Extra high thinking effort."
                                  ]
                                }
                              },
                              "required": [
                                "type"
                              ]
                            },
                            {
                              "properties": {
                                "type": {
                                  "const": "disabled",
                                  "description": "Disable thinking."
                                }
                              },
                              "required": [
                                "type"
                              ]
                            }
                          ]
                        },
                        "webSearch": {
                          "type": "object",
                          "description": "Use native web search tool.",
                          "properties": {
                            "enabled": {
                              "type": "boolean",
                              "description": "Whether web search is enabled."
                            },
                            "maxUses": {
                              "type": "integer",
                              "description": "Maximum number of web searches per request."
                            },
                            "allowedDomains": {
                              "type": "array",
                              "description": "Only include results from these domains.",
                              "items": {
                                "type": "string"
                              }
                            },
                            "blockedDomains": {
                              "type": "array",
                              "description": "Never include results from these domains.",
                              "items": {
                                "type": "string"
                              }
                            },
                            "userLocation": {
                              "type": "object",
                              "description": "User location for localizing search results.",
                              "properties": {
                                "type": {
                                  "type": "string",
                                  "const": "approximate",
                                  "description": "Approximate location."
                                },
                                "city": {
                                  "type": "string",
                                  "description": "City."
                                },
                                "region": {
                                  "type": "string",
                                  "description": "Region."
                                },
                                "country": {
                                  "type": "string",
                                  "description": "Country."
                                },
                                "timezone": {
                                  "type": "string",
                                  "description": "Timezone."
                                }
                              },
                              "required": [
                                "type"
                              ]
                            }
                          }
                        },
                        "memoryTool": {
                          "type": "boolean",
                          "description": "Use native memory tool."
                        },
                        "extraHeaders": {
                          "type": "object",
                          "description": "Extra headers to include in requests. Header values support `${APIKEY}` to reference the provider apiKey.",
                          "additionalProperties": {
                            "type": "string"
                          }
                        },
                        "extraBody": {
                          "type": "object",
                          "description": "Extra body parameters to include in requests.",
                          "additionalProperties": true
                        }
                      }
                    }
                  ]
                },
                "minItems": 0
              }
            }
          },
          "default": []
        }
      }
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p .",
    "watch": "tsc -watch -p .",
    "release": "bun run scripts/release.ts",
    "release:dry": "bun run scripts/release.ts --dry-run",
    "test:build": "tsc -p tsconfig.tests.json",
    "test": "npm run test:build && node --test out-tests/test/**/*.test.js",
    "test:unit": "npm run test:build && node --test out-tests/test/config/*.test.js out-tests/test/client/*.test.js out-tests/test/provider/*.test.js",
    "test:integration": "npm run test:build && node --test out-tests/test/integration/*.test.js"
  },
  "devDependencies": {
    "@types/node": "^22",
    "@types/vscode": "^1.104.0",
    "typescript": "^5.9.3"
  },
  "dependencies": {
    "@anthropic-ai/sdk": "^0.71.2",
    "@iarna/toml": "^2.2.5",
    "ollama": "^0.6.3",
    "openai": "^6.10.0"
  }
}
